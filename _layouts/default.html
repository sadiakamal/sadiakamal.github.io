<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>

  <body>
    <div class="wrapper layout">
      <!-- ============== SIDEBAR (1/3) ============== -->
      <aside class="sidebar" role="complementary" aria-label="Sidebar">
        <!-- Name ABOVE the image -->
        <h1 class="name">
          <a href="{{ "/" | absolute_url }}">
            {{ site.title | default: site.github.repository_name }}
          </a>
        </h1>

        <!-- Profile image -->
        <img
          src="{{ '/assets/img/SK.jpeg' | relative_url }}"
          alt="Profile photo"
          class="profile-pic"
        >

        <!-- Contact -->
        <div class="contact-info">
          <p>Email: <a href="mailto:sadia.kamal@okstate.edu">sadia.kamal@okstate.edu</a></p>
          <div class="contact-icons">
            <a href="https://www.linkedin.com/in/sadia-kamal-9ba392171/" target="_blank" rel="noopener noreferrer">
              <img src="{{ '/assets/linkedin.png' | relative_url }}" alt="LinkedIn">
            </a>
            <a href="https://scholar.google.com/citations?user=lclNrycAAAAJ&hl=en" target="_blank" rel="noopener noreferrer">
              <img src="{{ '/assets/google_scholar.png' | relative_url }}" alt="Google Scholar">
            </a>
          </div>
        </div>

        <!-- SITE SECTIONS (pages) -->
        <nav class="side-nav" aria-label="Site sections">
          <h2>Sections</h2>
          <ul>
            {% assign here = page.url | relative_url %}

            {% assign home_url = "/" | relative_url %}
            <li>
              <a href="{{ home_url }}"
                 {% if here == home_url %}aria-current="page" class="is-active"{% endif %}>
                Home
              </a>
            </li>

            {% assign pubs_url = "/publications" | relative_url %}
            <li>
              <a href="{{ pubs_url }}"
                 {% if here == pubs_url or here == pubs_url | append: "/" %}aria-current="page" class="is-active"{% endif %}>
                Publications
              </a>
            </li>

            {% assign edu_url = "/education" | relative_url %}
            <li>
              <a href="{{ edu_url }}"
                 {% if here == edu_url or here == edu_url | append: "/" %}aria-current="page" class="is-active"{% endif %}>
                Education
              </a>
            </li>

            <!-- Optional: any page with `nav: true` in front matter -->
            {% for p in site.pages %}
              {% if p.nav and p.title %}
                {% assign p_url = p.url | relative_url %}
                <li>
                  <a href="{{ p_url }}"
                     {% if here == p_url or here == p_url | append: "/" %}aria-current="page" class="is-active"{% endif %}>
                    {{ p.title }}
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </nav>

        <!-- ON THIS PAGE (auto-built from H2/H3 in content) -->
        <nav class="page-toc" aria-label="On this page">
          <h2>On this page</h2>
          <ul id="page-toc-list">
            <!-- Filled by JS from headings in main content -->
          </ul>
        </nav>
      </aside>

      <!-- ============== MAIN (2/3) ============== -->
      <main class="main" role="main">
        {% if site.logo %}
          <img src="{{ site.logo | relative_url }}" alt="Logo" />
        {% endif %}

        <p class="tagline">{{ site.description | default: site.github.project_tagline }}</p>

        {% if site.github.is_project_page %}
          <p class="view">
            <a href="{{ site.github.repository_url }}">
              View the Project on GitHub <small>{{ site.github.repository_nwo }}</small>
            </a>
          </p>
        {% endif %}

        {% if site.show_downloads %}
          <ul class="downloads">
            <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
            <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
            <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
          </ul>
        {% endif %}

        <section id="content-root">
          {{ content }}
        </section>


      </main>
    </div>

    <!-- Back to Top -->
    <a href="#top" class="back-to-top" aria-label="Back to top">â†‘</a>

    <!-- ===== Scroll helpers (TOC builder + scrollspy + back-to-top) ===== -->
    <script>
      (function () {
        // Ensure the page has a top anchor
        if (!document.getElementById('top')) {
          const topAnchor = document.createElement('div');
          topAnchor.id = 'top';
          document.body.prepend(topAnchor);
        }

        // Build TOC from h2/h3 inside #content-root
        const content = document.getElementById('content-root');
        const tocList = document.getElementById('page-toc-list');
        if (content && tocList) {
          const headings = content.querySelectorAll('h2, h3');
          const slugify = s => s.toLowerCase()
            .replace(/[^a-z0-9\s-]/g, '')
            .trim()
            .replace(/\s+/g, '-');

          headings.forEach(h => {
            if (!h.id) h.id = slugify(h.textContent);
            const li = document.createElement('li');
            li.className = h.tagName.toLowerCase(); // for indent styling
            const a = document.createElement('a');
            a.href = `#${h.id}`;
            a.textContent = h.textContent;
            li.appendChild(a);
            tocList.appendChild(li);
          });

          // Scrollspy: highlight current section link
          const links = Array.from(tocList.querySelectorAll('a'));
          const map = new Map(links.map(a => [a.getAttribute('href').slice(1), a]));
          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              const id = entry.target.id;
              const link = map.get(id);
              if (!link) return;
              if (entry.isIntersecting) {
                links.forEach(l => l.classList.remove('is-active'));
                link.classList.add('is-active');
              }
            });
          }, { rootMargin: '0px 0px -70% 0px', threshold: 0.1 });

          headings.forEach(h => observer.observe(h));
        }

        // Back-to-top visibility toggle
        const btt = document.querySelector('.back-to-top');
        const showBTT = () => {
          if (window.scrollY > 300) btt.classList.add('show');
          else btt.classList.remove('show');
        };
        window.addEventListener('scroll', showBTT);
        showBTT();
      })();
    </script>
  </body>
</html>
